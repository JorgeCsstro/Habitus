/* css/themes/dark.css - FIXED VERSION (Prevents Color Removal) */

/* CRITICAL: Use :root for highest specificity and inheritance */
html[data-theme="dark"]:root,
html[data-theme="dark"] {
    /* Core Palette - New Dark Colors */
    --primary: #6497b1 !important;           /* Quaternary for primary elements */
    --primary-dark: #005b96 !important;      /* Tertiary for darker states */
    --primary-light: #b3cde0 !important;     /* Lightest for light variations */
    --primary-brown: #6497b1 !important;     /* Maintaining compatibility */
    --primary-brown-light: #b3cde0 !important;
    
    --secondary: #b3cde0 !important;         /* Lightest for secondary elements */
    --secondary-dark: #6497b1 !important;    /* Quaternary as darker secondary */
    --secondary-light: #d1e5f0 !important;   /* Even lighter tint */
    --primary-green: #6497b1 !important;     /* Using quaternary for "green" elements */
    --primary-green-light: #b3cde0 !important;
    
    --accent: #b3cde0 !important;           /* Lightest for accents */
    
    /* Backgrounds */
    --bg-0: #011f4b !important;             /* Darkest for main background */
    --bg-1: #03396c !important;             /* Secondary for panels */
    --bg-2: #005b96 !important;             /* Tertiary for elevated panels */
    --bg-3: #2d5f7f !important;             /* Lighter variation */
    --bg-primary: #011f4b !important;
    --bg-secondary: #03396c !important;
    --bg-panel: #005b96 !important;
    --bg-tertiary: #2d5f7f !important;
    
    /* Text */
    --text-1: #b3cde0 !important;           /* Lightest for primary text */
    --text-2: #6497b1 !important;           /* Quaternary for secondary text */
    --text-3: #4a7c95 !important;           /* Dimmed version for muted text */
    --text-inverse: #011f4b !important;     /* Darkest for inverse text */
    --text-primary: #b3cde0 !important;
    --text-secondary: #6497b1 !important;
    --text-tertiary: #4a7c95 !important;
    --text-muted: #4a7c95 !important;
    
    /* Borders */
    --border-1: #005b96 !important;         /* Tertiary for borders */
    --border-2: #6497b1 !important;         /* Quaternary for stronger borders */
    --border-primary: #005b96 !important;
    --border-secondary: #6497b1 !important;
    --border-tertiary: #034768 !important;  /* Between secondary and tertiary */
    
    /* Status Colors - Adapted to dark palette */
    --success: #6497b1 !important;          /* Using quaternary */
    --error: #c98d8d !important;            /* Lightened red that works with blues */
    --warning: #b3cde0 !important;          /* Lightest for warnings */
    --info: #6497b1 !important;             /* Quaternary */
    
    --success-text: #6497b1 !important;
    --success-bg: #0a2d4f !important;       /* Very dark blue tint */
    --success-border: #005b96 !important;
    
    --error-text: #c98d8d !important;
    --error-bg: #2d1a1a !important;
    --error-border: #4a2a2a !important;
    
    --warning-text: #b3cde0 !important;
    --warning-bg: #1a2d42 !important;
    --warning-border: #2d4a68 !important;
    
    --info-text: #b3cde0 !important;
    --info-bg: #0a2d4f !important;
    --info-border: #005b96 !important;
    
    /* Shadows - Using darkest color */
    --shadow: rgba(1, 31, 75, 0.4) !important;
    --shadow-dark: rgba(1, 31, 75, 0.6) !important;
    --shadow-light: rgba(1, 31, 75, 0.2) !important;
    --shadow-medium: rgba(1, 31, 75, 0.3) !important;
    
    /* Button Variables */
    --btn-primary-bg: #6497b1 !important;
    --btn-primary-text: #011f4b !important;
    --btn-primary-hover: #005b96 !important;
    
    --btn-secondary-bg: #03396c !important;
    --btn-secondary-text: #b3cde0 !important;
    --btn-secondary-border: #005b96 !important;
    --btn-secondary-hover: #005b96 !important;
    
    --btn-success-bg: #6497b1 !important;
    --btn-success-text: #011f4b !important;
    --btn-success-hover: #4a7c95 !important;
    
    /* Input Variables */
    --input-bg: #005b96 !important;
    --input-text: #b3cde0 !important;
    --input-border: #6497b1 !important;
    --input-focus: #b3cde0 !important;
    --input-placeholder: #6497b1 !important;
    
    /* Modal Variables */
    --modal-bg: #005b96 !important;
    --modal-overlay: rgba(1, 31, 75, 0.8) !important;
    --modal-shadow: rgba(0, 0, 0, 0.5) !important;
    
    /* Notification Variables */
    --notification-bg: #005b96 !important;
    --notification-shadow: rgba(1, 31, 75, 0.4) !important;
    
    /* Sidebar Variables */
    --sidebar-bg: #03396c !important;
    --sidebar-item-hover: rgba(100, 151, 177, 0.2) !important;
    --sidebar-item-active: #6497b1 !important;
    
    /* Tooltip Variables */
    --tooltip-bg: rgba(179, 205, 224, 0.9) !important;
    --tooltip-text: #011f4b !important;
    --tooltip-shadow: rgba(0, 0, 0, 0.3) !important;
    
    /* Scrollbar Variables */
    --scrollbar-track: #03396c !important;
    --scrollbar-thumb: #005b96 !important;
    --scrollbar-thumb-hover: #6497b1 !important;
    
    /* Room Variables */
    --room-floor: #005b96 !important;
    --room-wall-left: linear-gradient(to bottom, #03396c, #011f4b) !important;
    --room-wall-right: linear-gradient(to left, #011f4b, #001225) !important;
    --room-door: linear-gradient(to bottom, #4a7c95, #03396c) !important;
    --room-door-handle: #b3cde0 !important;
    
    /* Task Item Variables */
    --task-item-completed: #0a2d4f !important;
    --task-item-completed-border: #005b96 !important;
}

/* CRITICAL: Force application with maximum specificity */
html[data-theme="dark"] body {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

html[data-theme="dark"] .panel {
    background-color: var(--bg-panel) !important;
    border-color: var(--border-primary) !important;
    color: var(--text-primary) !important;
}

html[data-theme="dark"] .panel-header {
    background-color: var(--bg-secondary) !important;
    border-color: var(--border-primary) !important;
    color: var(--text-primary) !important;
}

html[data-theme="dark"] .main-header {
    background-color: var(--bg-panel) !important;
    border-color: var(--border-primary) !important;
    color: var(--text-primary) !important;
}

html[data-theme="dark"] .left-menu {
    background-color: var(--sidebar-bg) !important;
    border-color: var(--border-primary) !important;
}

html[data-theme="dark"] .content-container {
    background-color: var(--bg-0) !important;
}

html[data-theme="dark"] .dashboard-content {
    background-color: var(--bg-0) !important;
}

html[data-theme="dark"] .tasks-content {
    background-color: var(--bg-0) !important;
}

html[data-theme="dark"] .settings-content {
    background-color: var(--bg-0) !important;
}

html[data-theme="dark"] .shop-content {
    background-color: var(--bg-0) !important;
}

html[data-theme="dark"] .habitus-content {
    background-color: var(--bg-0) !important;
}

html[data-theme="dark"] .subscription-content {
    background-color: var(--bg-0) !important;
}

/* CRITICAL: Prevent inline style overrides */
html[data-theme="dark"] * {
    color: inherit !important;
    background-color: inherit !important;
}

/* Override for elements that should have specific colors */
html[data-theme="dark"] .panel * {
    color: var(--text-primary) !important;
}

html[data-theme="dark"] .main-header * {
    color: var(--text-primary) !important;
}

html[data-theme="dark"] h1, 
html[data-theme="dark"] h2, 
html[data-theme="dark"] h3, 
html[data-theme="dark"] h4, 
html[data-theme="dark"] h5, 
html[data-theme="dark"] h6 {
    color: var(--text-primary) !important;
}

html[data-theme="dark"] p {
    color: var(--text-secondary) !important;
}

/* Dark theme specific enhancements with new colors */
html[data-theme="dark"] input::placeholder,
html[data-theme="dark"] textarea::placeholder {
    color: var(--input-placeholder) !important;
}

html[data-theme="dark"] .setting-button:hover,
html[data-theme="dark"] .theme-option:hover {
    box-shadow: 0 4px 15px rgba(1, 31, 75, 0.5) !important;
}

html[data-theme="dark"] .complete-button:hover::before {
    border-color: var(--primary-green-light) !important;
}

html[data-theme="dark"] .shop-item:hover {
    box-shadow: 0 4px 15px rgba(1, 31, 75, 0.5) !important;
}

html[data-theme="dark"] .habitus-preview:hover {
    box-shadow: 0 4px 20px rgba(1, 31, 75, 0.6) !important;
}

/* Dark theme room styling overrides */
html[data-theme="dark"] .room-floor {
    background: var(--room-floor) !important;
    background-image: 
        linear-gradient(rgba(179, 205, 224, 0.05) 1px, transparent 1px), 
        linear-gradient(90deg, rgba(179, 205, 224, 0.05) 1px, transparent 1px) !important;
}

html[data-theme="dark"] .room-wall-left {
    background: var(--room-wall-left) !important;
}

html[data-theme="dark"] .room-wall-right {
    background: var(--room-wall-right) !important;
}

html[data-theme="dark"] .room-door {
    background: var(--room-door) !important;
}

html[data-theme="dark"] .room-door::before {
    background: var(--room-door-handle) !important;
}