/* css/themes/dark.css - UPDATED WITH NEW COLOR PALETTE */

/* CRITICAL: Use :root for highest specificity and inheritance */
html[data-theme="dark"]:root,
html[data-theme="dark"] {
    /* Core Palette - New Dark Colors */
    --primary: #b3cde0;           /* Lightest for primary elements in dark theme */
    --primary-dark: #6497b1;      /* Quaternary for darker states */
    --primary-light: #d1e5f0;     /* Even lighter tint */
    --primary-brown: #b3cde0;     /* Maintaining compatibility */
    --primary-brown-light: #d1e5f0;
    
    --secondary: #6497b1;         /* Quaternary for secondary elements */
    --secondary-dark: #005b96;    /* Tertiary as darker secondary */
    --secondary-light: #b3cde0;   /* Lightest for light variations */
    --primary-green: #6497b1;     /* Using quaternary for "green" elements */
    --primary-green-light: #b3cde0;
    
    --accent: #b3cde0;           /* Lightest for accents */
    
    /* Backgrounds - Proper dark hierarchy */
    --bg-0: #1a1a3a;             /* Darkest for main background */
    --bg-1: #03396c;             /* Secondary for headers/footers */
    --bg-2: #005b96;             /* Tertiary for panels - elevated */
    --bg-3: #1a4a75;             /* Lighter variation for hover states */
    --bg-primary: #011f4b;
    --bg-secondary: #03396c;
    --bg-panel: #1b1a55;
    --bg-tertiary: #1a4a75;
    
    /* Text - Using lighter colors for contrast on dark backgrounds */
    --text-1: #b3cde0;           /* Lightest for primary text */
    --text-2: #6497b1;           /* Quaternary for secondary text */
    --text-3: #4a7c95;           /* Dimmed version for muted text */
    --text-inverse: #011f4b;     /* Darkest for inverse text */
    --text-primary: #b3cde0;
    --text-secondary: #6497b1;
    --text-tertiary: #4a7c95;
    --text-muted: #4a7c95;
    
    /* Borders - Using middle tones */
    --border-1: #005b96;         /* Tertiary for borders */
    --border-2: #6497b1;         /* Quaternary for stronger borders */
    --border-primary: #005b96;
    --border-secondary: #6497b1;
    --border-tertiary: #034768;  /* Between secondary and tertiary */
    
    /* Status Colors - Adapted to dark palette */
    --success: #6497b1;          /* Using quaternary */
    --error: #c98d8d;            /* Lightened red that works with blues */
    --warning: #b3cde0;          /* Lightest for warnings */
    --info: #6497b1;             /* Quaternary */
    
    --success-text: #6497b1;
    --success-bg: #0a2d4f;       /* Very dark blue tint */
    --success-border: #005b96;
    
    --error-text: #c98d8d;
    --error-bg: #2d1a1a;
    --error-border: #4a2a2a;
    
    --warning-text: #b3cde0;
    --warning-bg: #1a2d42;
    --warning-border: #2d4a68;
    
    --info-text: #b3cde0;
    --info-bg: #0a2d4f;
    --info-border: #005b96;
    
    /* Shadows - Using darkest color for proper depth */
    --shadow: rgba(1, 31, 75, 0.4);
    --shadow-dark: rgba(1, 31, 75, 0.6);
    --shadow-light: rgba(1, 31, 75, 0.2);
    --shadow-medium: rgba(1, 31, 75, 0.3);
    
    /* Button Variables */
    --btn-primary-bg: #6497b1;
    --btn-primary-text: #011f4b;
    --btn-primary-hover: #b3cde0;
    
    --btn-secondary-bg: #03396c;
    --btn-secondary-text: #b3cde0;
    --btn-secondary-border: #005b96;
    --btn-secondary-hover: #005b96;
    
    --btn-success-bg: #6497b1;
    --btn-success-text: #011f4b;
    --btn-success-hover: #4a7c95;
    
    /* Input Variables */
    --input-bg: #005b96;
    --input-text: #b3cde0;
    --input-border: #6497b1;
    --input-focus: #b3cde0;
    --input-placeholder: #6497b1;
    
    /* Modal Variables */
    --modal-bg: #005b96;
    --modal-overlay: rgba(1, 31, 75, 0.8);
    --modal-shadow: rgba(0, 0, 0, 0.5);
    
    /* Notification Variables */
    --notification-bg: #005b96;
    --notification-shadow: rgba(1, 31, 75, 0.4);
    
    /* Sidebar Variables */
    --sidebar-bg: #121233;
    --sidebar-item-hover: rgba(100, 151, 177, 0.2);
    --sidebar-item-active: #6497b1;
    
    /* Tooltip Variables */
    --tooltip-bg: rgba(179, 205, 224, 0.9);
    --tooltip-text: #011f4b;
    --tooltip-shadow: rgba(0, 0, 0, 0.3);
    
    /* Scrollbar Variables */
    --scrollbar-track: #03396c;
    --scrollbar-thumb: #005b96;
    --scrollbar-thumb-hover: #6497b1;
    
    /* Task Item Variables */
    --task-item-completed: #0a2d4f;
    --task-item-completed-border: #005b96;
}

/* CRITICAL: Force application with maximum specificity */
html[data-theme="dark"] body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

html[data-theme="dark"] .panel {
    background-color: var(--bg-panel);
    border-color: var(--border-primary);
    color: var(--text-primary);
    box-shadow: 0 2px 8px var(--shadow-light), 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .panel-header {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    color: var(--text-primary);
}

html[data-theme="dark"] .main-header {
    background-color: var(--bg-panel);
    border-color: var(--border-primary);
    color: var(--text-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
}

html[data-theme="dark"] .left-menu {
    background-color: var(--sidebar-bg);
    border-color: var(--border-primary);
    box-shadow: 2px 0 4px var(--shadow-light);
}

/* Content areas */
html[data-theme="dark"] .content-container {
    background-color: var(--bg-0);
}

html[data-theme="dark"] .dashboard-content,
html[data-theme="dark"] .tasks-content,
html[data-theme="dark"] .settings-content,
html[data-theme="dark"] .shop-content,
html[data-theme="dark"] .habitus-content,
html[data-theme="dark"] .subscription-content {
    background-color: var(--bg-0);
}

/* CRITICAL: Text color inheritance for dark theme */
html[data-theme="dark"] h1, 
html[data-theme="dark"] h2, 
html[data-theme="dark"] h3, 
html[data-theme="dark"] h4, 
html[data-theme="dark"] h5, 
html[data-theme="dark"] h6 {
    color: var(--text-primary);
}

html[data-theme="dark"] p {
    color: var(--text-secondary);
}

/* Interactive elements with proper dark styling */
html[data-theme="dark"] .daily-item,
html[data-theme="dark"] .goal-item,
html[data-theme="dark"] .challenge-item,
html[data-theme="dark"] .task-item {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
    color: var(--text-primary);
}

html[data-theme="dark"] .daily-item:hover,
html[data-theme="dark"] .goal-item:hover,
html[data-theme="dark"] .challenge-item:hover,
html[data-theme="dark"] .task-item:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
    box-shadow: 0 2px 6px var(--shadow);
}

/* Shop items */
html[data-theme="dark"] .shop-item {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
}

html[data-theme="dark"] .shop-item:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
    box-shadow: 0 3px 8px var(--shadow);
}

/* Form elements */
html[data-theme="dark"] .settings-section {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
}

html[data-theme="dark"] .theme-option {
    background-color: var(--bg-panel);
    border: 2px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
}

html[data-theme="dark"] .theme-option:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
    box-shadow: 0 2px 6px var(--shadow);
}

html[data-theme="dark"] .theme-option.active {
    border-color: var(--primary);
    background-color: var(--bg-tertiary);
    box-shadow: 0 0 0 3px rgba(179, 205, 224, 0.2);
}

/* Inventory items */
html[data-theme="dark"] .inventory-item {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
}

html[data-theme="dark"] .inventory-item:hover:not(.disabled) {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
    box-shadow: 0 2px 6px var(--shadow);
}

/* Subscription plan cards */
html[data-theme="dark"] .plan-card {
    background-color: var(--bg-panel);
    border: 3px solid var(--border-primary);
    box-shadow: 0 4px 12px var(--shadow);
}

html[data-theme="dark"] .plan-card:hover {
    border-color: var(--border-secondary);
    box-shadow: 0 8px 20px var(--shadow-medium);
}

/* UI elements with proper dark styling */
html[data-theme="dark"] .notification,
html[data-theme="dark"] .modal-content,
html[data-theme="dark"] .cart-dropdown,
html[data-theme="dark"] .notifications-dropdown {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 8px 25px var(--shadow-medium);
}

html[data-theme="dark"] .hcoin-balance,
html[data-theme="dark"] .survey-button, 
html[data-theme="dark"] .messages-button, 
html[data-theme="dark"] .profile-button,
html[data-theme="dark"] .theme-toggle-button {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow-light);
}

html[data-theme="dark"] .hcoin-balance:hover,
html[data-theme="dark"] .survey-button:hover, 
html[data-theme="dark"] .messages-button:hover, 
html[data-theme="dark"] .profile-button:hover,
html[data-theme="dark"] .theme-toggle-button:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
    box-shadow: 0 2px 6px var(--shadow);
}

/* Dark theme specific enhancements */
html[data-theme="dark"] input::placeholder,
html[data-theme="dark"] textarea::placeholder {
    color: var(--input-placeholder);
}

html[data-theme="dark"] .complete-button:hover::before {
    border-color: var(--primary-green-light);
}

/* Additional dark theme text color fixes */
html[data-theme="dark"] .daily-title,
html[data-theme="dark"] .goal-title,
html[data-theme="dark"] .challenge-title,
html[data-theme="dark"] .task-title,
html[data-theme="dark"] .item-name,
html[data-theme="dark"] .setting-title,
html[data-theme="dark"] .notification-title {
    color: var(--text-primary);
}

html[data-theme="dark"] .daily-time,
html[data-theme="dark"] .task-description,
html[data-theme="dark"] .setting-description,
html[data-theme="dark"] .notification-message {
    color: var(--text-secondary);
}

html[data-theme="dark"] .daily-dots,
html[data-theme="dark"] .goal-dots,
html[data-theme="dark"] .challenge-dots {
    border-color: var(--border-secondary);
}