/* css/themes/dark.css - UPDATED WITH NEW COLOR PALETTE */

html[data-theme="dark"]:root,
html[data-theme="dark"] {
    /* Core Palette */
    --primary: #b3cde0;           /* Lightest for primary elements in dark theme */
    --primary-light: #d1e5f0;     /* Even lighter tint */
    --secondary: #6497b1;         /* Quaternary for secondary elements */
    --accent: #b3cde0;            /* Lightest for accents */
    
    /* Backgrounds */
    --bg-primary: #1a1a3a;        /* Darkest for main background */
    --bg-secondary: #03396c;      /* Secondary for headers/footers */
    --bg-panel: #1b1a55;          /* Soft warm panel background */
    
    /* Text */
    --text-primary: #b3cde0;      /* Lightest for primary text */
    --text-secondary: #6497b1;     /* Quaternary for secondary text */
    
    /* Borders */
    --border-primary: #005b96;    /* Tertiary for borders */
    
    /* Status Colors */
    --success: #6497b1;           /* Using quaternary */
    --error: #c98d8d;             /* Lightened red that works with blues */
    --warning: #b3cde0;           /* Lightest for warnings */
    --info: #6497b1;              /* Quaternary */
    
    /* Shadows */
    --shadow: rgba(1, 31, 75, 0.4);
    
    /* Button Variables */
    --btn-bg: #6497b1;            /* Primary button background */
    --btn-text: #011f4b;          /* Dark text */
    
    /* Input Variables */
    --input-bg: #005b96;
    --input-text: #b3cde0;
    
    /* Miscellaneous */
    --tooltip-bg: rgba(179, 205, 224, 0.9);
}


/* CRITICAL: Force application with maximum specificity */
html[data-theme="dark"] body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

html[data-theme="dark"] .panel {
    background-color: var(--bg-panel);
    border-color: var(--border-primary);
    color: var(--text-primary);
    box-shadow: 0 2px 8px var(--shadow), 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .panel-header {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    color: var(--text-primary);
}

html[data-theme="dark"] .main-header {
    background-color: var(--bg-panel);
    border-color: var(--border-primary);
    color: var(--text-primary);
    box-shadow: 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .left-menu {
    background-color: var(--bg-panel);
    border-color: var(--border-primary);
    box-shadow: 2px 0 4px var(--shadow);
}

/* Content areas */
html[data-theme="dark"] .content-container {
    background-color: var(--bg-primary);
}

html[data-theme="dark"] .dashboard-content,
html[data-theme="dark"] .tasks-content,
html[data-theme="dark"] .settings-content,
html[data-theme="dark"] .shop-content,
html[data-theme="dark"] .habitus-content,
html[data-theme="dark"] .subscription-content {
    background-color: var(--bg-primary);
}

/* CRITICAL: Text color inheritance for dark theme */
html[data-theme="dark"] h1, 
html[data-theme="dark"] h2, 
html[data-theme="dark"] h3, 
html[data-theme="dark"] h4, 
html[data-theme="dark"] h5, 
html[data-theme="dark"] h6 {
    color: var(--text-primary);
}

html[data-theme="dark"] p {
    color: var(--text-secondary);
}

/* Interactive elements with proper dark styling */
html[data-theme="dark"] .daily-item,
html[data-theme="dark"] .goal-item,
html[data-theme="dark"] .challenge-item,
html[data-theme="dark"] .task-item {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow);
    color: var(--text-primary);
}

html[data-theme="dark"] .daily-item:hover,
html[data-theme="dark"] .goal-item:hover,
html[data-theme="dark"] .challenge-item:hover,
html[data-theme="dark"] .task-item:hover {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    box-shadow: 0 2px 6px var(--shadow);
}

/* Shop items */
html[data-theme="dark"] .shop-item {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .shop-item:hover {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    box-shadow: 0 3px 8px var(--shadow);
}

/* Form elements */
html[data-theme="dark"] .settings-section {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .theme-option {
    background-color: var(--bg-panel);
    border: 2px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .theme-option:hover {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    box-shadow: 0 2px 6px var(--shadow);
}

html[data-theme="dark"] .theme-option.active {
    border-color: var(--primary);
    background-color: var(--bg-secondary);
    box-shadow: 0 0 0 3px rgba(179, 205, 224, 0.2);
}

/* Inventory items */
html[data-theme="dark"] .inventory-item {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .inventory-item:hover:not(.disabled) {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    box-shadow: 0 2px 6px var(--shadow);
}

/* Subscription plan cards */
html[data-theme="dark"] .plan-card {
    background-color: var(--bg-panel);
    border: 3px solid var(--border-primary);
    box-shadow: 0 4px 12px var(--shadow);
}

html[data-theme="dark"] .plan-card:hover {
    border-color: var(--border-primary);
    box-shadow: 0 8px 20px var(--shadow);
}

/* UI elements with proper dark styling */
html[data-theme="dark"] .notification,
html[data-theme="dark"] .modal-content,
html[data-theme="dark"] .cart-dropdown,
html[data-theme="dark"] .notifications-dropdown {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 8px 25px var(--shadow);
}

html[data-theme="dark"] .hcoin-balance,
html[data-theme="dark"] .survey-button, 
html[data-theme="dark"] .messages-button, 
html[data-theme="dark"] .profile-button,
html[data-theme="dark"] .theme-toggle-button {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px var(--shadow);
}

html[data-theme="dark"] .hcoin-balance:hover,
html[data-theme="dark"] .survey-button:hover, 
html[data-theme="dark"] .messages-button:hover, 
html[data-theme="dark"] .profile-button:hover,
html[data-theme="dark"] .theme-toggle-button:hover {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    box-shadow: 0 2px 6px var(--shadow);
}

/* Dark theme specific enhancements */
html[data-theme="dark"] input::placeholder,
html[data-theme="dark"] textarea::placeholder {
    color: var(--text-secondary);
}

html[data-theme="dark"] .complete-button:hover::before {
    border-color: var(--primary-light);
}

/* Additional dark theme text color fixes */
html[data-theme="dark"] .daily-title,
html[data-theme="dark"] .goal-title,
html[data-theme="dark"] .challenge-title,
html[data-theme="dark"] .task-title,
html[data-theme="dark"] .item-name,
html[data-theme="dark"] .setting-title,
html[data-theme="dark"] .notification-title {
    color: var(--text-primary);
}

html[data-theme="dark"] .daily-time,
html[data-theme="dark"] .task-description,
html[data-theme="dark"] .setting-description,
html[data-theme="dark"] .notification-message {
    color: var(--text-secondary);
}

html[data-theme="dark"] .daily-dots,
html[data-theme="dark"] .goal-dots,
html[data-theme="dark"] .challenge-dots {
    border-color: var(--border-primary);
}

html[data-theme="dark"] .menu-item img,
html[data-theme="dark"] .user-actions div img,
html[data-theme="dark"] .user-actions a img{
    filter: invert(0.8);
}

/* Settings page specific dark theme styles */
html[data-theme="dark"] .theme-switching,
html[data-theme="dark"] .theme-switching * {
    transition: none;
}

/* Ensure proper contrast in dark theme */
html[data-theme="dark"] .theme-preview.theme-light {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
}

html[data-theme="dark"] .theme-preview.theme-dark {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.2);
}

/* Dark theme image filters for settings icons */
html[data-theme="dark"] .button-icon img,
html[data-theme="dark"] .status-icon img,
html[data-theme="dark"] .warning-message img {
    filter: invert(0.8);
}